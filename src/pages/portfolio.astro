---
import Layout from "../layouts/Layout.astro";
import PortfolioItem from "../components/PortfolioItem.astro";
import { getEntry } from 'astro:content';

interface PortfolioItemData {
  subtitle: string;
  title: string;
  p: string[];
  img: string;
}

const portfolioEntry = await getEntry('data', 'portfolio');

if (!portfolioEntry) {
  throw new Error("Missing content entry: data/portfolio");
}

const portfolioData = portfolioEntry.data as PortfolioItemData[];
---

<Layout title="508.dev Portfolio" data-theme="light">
  <div class="relative isolate bg-white px-6 py-24 sm:py-32 lg:px-8">
    <div class="mx-auto max-w-2xl text-center lg:max-w-4xl">
      <h2 class="text-base font-semibold leading-7 text-indigo-600">
        Success with 508
      </h2>
      <p
        class="mt-2 text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl"
      >
        Our Projects
      </p>
    </div>
    <p
      class="mx-auto mt-6 max-w-2xl text-center text-lg leading-8 text-gray-600"
    >
      508.dev has made a habit out of delivering phenomenal engineering to our
      clients. Learn more about the companies with whom we've created success.
    </p>
  </div>
  <div>
    <div>
      {
        portfolioData.map((portfolioItem: PortfolioItemData, i: number) => {
          const item = {
            id: i + 1,
            small: portfolioItem.subtitle,
            header: portfolioItem.title,
            content_p1: portfolioItem.p[0],
            content_p2: portfolioItem.p[1],
            content_p3: portfolioItem.p[2],
            content_p4: portfolioItem.p[3],
            img: portfolioItem.img,
          };
          return <PortfolioItem item={item} />;
        })
      }
    </div>
  </div>
</Layout>

<style></style>
